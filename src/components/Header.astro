---
const { title } = Astro.props;

let usuari;
if (Astro.cookies.has("usuari")) {
  const cookie = Astro.cookies.get("usuari");
  usuari = cookie.value;
}

const lang = Astro.cookies.get("idiom");

let cookie;
if (!Astro.cookies.has("idiom")) {
  cookie = Astro.cookies.set("idiom", "ca");
}
---

<div
  style="background-image: url(/header-img.jpeg); background-size: 130px 130px;"
  class="relative rounded-full mt-5 flex text-slate-700 p-2 mb-4 w-11/12 mx-auto"
>
  <h1
    class="pl-3 text-white bg-[black]/55 font-normal text-4xl rounded-xl
        w-fit p-4 my-10 mx-auto md:p-6 md:text-4xl lg:p-8 lg:text-5xl"
  >
    {title}
  </h1>
  <div class="absolute right-20 flex justify-center items-center top-3">
    <a class="block m-2 p-1" href="/idiomas/ca">
      <img
        class="h-6 w-8"
        src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Flag_of_Catalonia.svg/810px-Flag_of_Catalonia.svg.png"
        alt="catalunya"
      />
    </a>
    <a class="block m-2 p-1" href="/idiomas/es">
      <img
        class="h-6 w-8"
        src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQREKy9cfYiLuGD_prBWuzN_e5j752B8B5O9w&s"
        alt="españa"
      />
    </a>
    <p class="bg-black/55 text-white p-2 rounded-lg text-bold text-xl ml-12">
      {
        usuari ? (
          <a href="/logout" class="no-underline">
            {usuari}{" "}
            {lang.value === "ca" ? "(Tancar sessió)" : "(Cerrar sesión)"}
          </a>
        ) : (
          <a href="/login" class="no-underline">
            {lang.value === "ca" ? "Inicia sessió" : "Iniciar sesión"}
          </a>
        )
      }
    </p>
  </div>
</div>
